# Claude Code サブエージェント一覧

このドキュメントでは、プロジェクトで作成したカスタムサブエージェントの情報をまとめています。

## 📋 サブエージェント一覧

### 1. ui-verification-specialist - UI修正検証専門エージェント

**目的**: UI/フロントエンド修正完了時の視覚的検証

**特徴**:
- ユーザー目線の実操作主体（内部構造ではなくUI操作）
- スクリーンショット撮影 → Read ツールで画像確認 → 実際の表示に基づいて判定
- FALSE SUCCESS CLAIMS（虚偽の成功宣言）完全防止
- 修正内容が期待通りに反映されているか厳格判定

**起動方法**:
```python
# CLAUDE.mdルールにより、UI修正完了時に自動実行
Task(
    subagent_type="ui-verification-specialist",
    prompt="UI修正完了検証: [修正内容]の視覚的検証を実施してください"
)
```

**主な動作**:
1. Playwright MCPでブラウザ起動
2. 実際にページを表示
3. スクリーンショット撮影
4. Read ツールで画像確認（最重要）
5. 必要に応じてユーザー操作（クリック・入力等）
6. 操作後にスクリーンショット撮影
7. Read ツールで画像確認
8. 画像で確認した事実のみを報告

**絶対禁止事項**:
- JavaScript実行だけでのUI確認
- コンソールログだけでの判定
- HTMLソースだけでの判定
- 推測・憶測での成功宣言

**関連ファイル**:
- `.clinerules-ui-verification-specialist` - エージェントルール定義
- `.claude/agents/ui-verification-specialist.md` - エージェント設定
- `UI_REVIEW_AGENT_README.md` - 使用方法ドキュメント

---

### 2. ui-review - UI専門レビューエージェント

**目的**: アプリ内部構造を見ずにUI表示のみから問題点をリストアップ

**特徴**:
- コードを見ない（HTMLソース・JavaScript・CSSファイルは参照禁止）
- 画面だけを見る（スクリーンショットで表示されている内容だけを評価）
- ユーザー目線（技術者ではなく一般ユーザーとして評価）
- 問題点リストアップに特化（修正は求めず、発見した問題をすべて列挙）
- 厳格な品質基準（業界標準以上のレベルを要求）

**起動方法**:
```bash
# 手動起動（カスタムエージェント未認識のため）
claude --prompt "https://example.com のUIレビューを実施してください。.clinerules-ui-review の指示に従い、UI表示のみから問題点をリストアップしてください。"
```

**評価基準**:
- **レイアウト・デザイン**: 要素配置、余白、整列、レスポンシブ、崩れ
- **色・視認性**: コントラスト（WCAG基準4.5以上）、統一性、強調、色弱対応
- **テキスト・フォント**: 文字サイズ（最小14px）、行間（1.5倍）、可読性
- **ボタン・インタラクション**: サイズ（最小44x44px）、明確性、ホバー効果
- **ユーザビリティ**: ナビゲーション、情報階層、一貫性、エラー表示
- **アクセシビリティ**: キーボード操作、フォーカス表示、代替テキスト

**重大度レベル**:
- **Critical（致命的）**: アプリ使用不能、主要機能動作不能
- **High（高）**: 主要機能に大きな支障、多くのユーザーが影響
- **Medium（中）**: 不便だが使用可能、一部ユーザーが影響
- **Low（低）**: 軽微な視覚的問題、改善の余地

**レポート形式**:
```markdown
# UIレビュー結果レポート

## 📋 レビュー概要
- 対象URL: https://example.com
- 実施日時: 2025-01-11 10:30:00
- レビュー画面数: 5画面
- 検出問題数: Critical: 2件、High: 5件、Medium: 8件、Low: 12件

## 🚨 Critical（致命的）問題
### C-1: ログインボタンが画面外にはみ出している
- 画面: トップページ（モバイル）
- スクリーンショット: top_page_mobile-1234567890.png
- 問題内容: ログインボタンの右半分が画面外にはみ出しており、タップできない
- 影響: ユーザーがログインできない

[以下、すべての問題を列挙]

## 📊 問題カテゴリ別集計
- レイアウト・デザイン: 8件
- 色・視認性: 7件
- テキスト・フォント: 5件
[...]

## 📸 スクリーンショット一覧
1. top_page_desktop-*.png - トップページ（Desktop）
2. top_page_mobile-*.png - トップページ（Mobile）
[...]
```

**絶対禁止事項**:
- コードファイルの読み込み
- JavaScript実行による内部情報取得
- 修正方法の提案・実装
- 技術的な原因分析

**関連ファイル**:
- `.clinerules-ui-review` - エージェントルール定義
- `.claude/agents/ui-review.json` - エージェント設定
- `UI_REVIEW_README.md` - 使用方法ドキュメント

---

## 🆚 ui-verification-specialist vs ui-review 比較表

| 項目 | ui-verification-specialist | ui-review |
|------|---------------------------|-----------|
| **目的** | UI修正内容の検証 | UI全体の問題点リストアップ |
| **タイミング** | UI修正完了時（自動起動） | 任意（定期レビュー） |
| **スコープ** | 特定の修正箇所 | アプリ全体 |
| **姿勢** | 客観的・事実確認 | 批判的・厳格 |
| **出力** | 検証結果（合格/不合格） | 問題リスト・レポート |
| **修正提案** | なし | なし |
| **コード参照** | 禁止 | 禁止 |
| **スクリーンショット** | 必須 | 必須 |

---

## 📚 使用例

### ui-verification-specialist の使用例

**シナリオ**: サイドバーのレイアウト修正を実施し、デプロイ完了

```python
# CLAUDE.mdルールにより自動実行
Task(
    subagent_type="ui-verification-specialist",
    prompt="UI修正完了検証: サイドバーのレイアウト修正の視覚的検証を実施してください。特にモバイル表示でのレイアウト崩れがないか確認してください。"
)
```

**エージェントの動作**:
1. https://sound-platform-ycqe3vmjva-an.a.run.app を開く
2. デスクトップ表示（1280x720）でスクリーンショット撮影
3. Read ツールで画像確認 → サイドバーのレイアウトを視覚的に確認
4. モバイル表示（390x844）でスクリーンショット撮影
5. Read ツールで画像確認 → モバイルでのレイアウト確認
6. サイドバーをクリック → スクリーンショット撮影 → Read で確認
7. 検証結果報告: 「✅ サイドバーのレイアウト修正が正常に反映されています」

### ui-review の使用例

**シナリオ**: 新機能リリース前のUI全体レビュー

```bash
claude --prompt "https://sound-platform-ycqe3vmjva-an.a.run.app のUIレビューを実施してください。.clinerules-ui-review の指示に従い、以下を重点確認してください：
1. トップページ
2. ログイン画面
3. ダッシュボード
4. プレイリスト画面
5. 設定画面

デスクトップとモバイルの両方で確認し、問題点を重大度別にリストアップしてください。"
```

**エージェントの動作**:
1. 各画面をデスクトップ（1280x720）とモバイル（390x844）で表示
2. すべての画面でスクリーンショット撮影
3. Read ツールで各画像を確認
4. レイアウト・色・テキスト・ボタン・ユーザビリティ・アクセシビリティを評価
5. 発見した問題をすべて記録
6. 重大度（Critical/High/Medium/Low）を判定
7. Markdownレポート生成

**出力レポート例**:
```markdown
# UIレビュー結果レポート

## 📋 レビュー概要
- 検出問題数: Critical: 1件、High: 3件、Medium: 7件、Low: 15件

## 🚨 Critical問題
### C-1: プレイリスト画面でメインコンテンツが隠れている
- スクリーンショット: playlist_mobile-*.png
- 問題: ヘッダーがコンテンツに重なり、プレイリストが見えない
- 影響: モバイルユーザーがプレイリストを使用できない

## ⚠️ High問題
### H-1: ログインボタンのコントラスト比不足
- スクリーンショット: login_desktop-*.png
- 問題: 背景#f5f5f5、文字#bbb、コントラスト比2.3（WCAG基準4.5未達）
- 影響: 多くのユーザーがボタンを認識できない
[...]
```

---

## 🔄 ワークフロー統合

### UI修正のワークフロー

```
1. 開発者がUI修正を実施
   ↓
2. Cloud Runにデプロイ
   ↓
3. CLAUDE.mdルール発動
   ↓
4. ui-verification-specialist 自動起動
   ↓
5. スクリーンショット撮影 → 画像確認 → 検証
   ↓
6. 検証結果報告
   ├─ ✅ 合格 → 修正完了報告
   └─ ❌ 不合格 → 即座ロールバック → 再修正
```

### 定期UIレビューのワークフロー

```
1. 月1回、またはリリース前にレビュー実施
   ↓
2. ui-review を手動起動
   ↓
3. アプリ全体のスクリーンショット撮影・確認
   ↓
4. 問題点リストアップ
   ↓
5. 重大度別に問題を分類
   ↓
6. レポート生成・共有
   ↓
7. Critical/High問題の修正計画作成
```

---

## 📋 推奨使用頻度

### ui-verification-specialist
- **タイミング**: UI修正完了時（自動）
- **頻度**: 修正ごと
- **所要時間**: 2-5分

### ui-review
- **定期レビュー**: 月1回
- **リリース前レビュー**: 新機能リリース前必須
- **大規模修正後**: UI大幅変更後必須
- **ユーザーフィードバック後**: UI関連の問題報告後
- **所要時間**: 15-30分（画面数により変動）

---

## 🚨 重要な注意事項

### 共通ルール
1. **スクリーンショット撮影は必須** - UI状態確認時は例外なく撮影
2. **Read ツール実行は必須** - 撮影した画像を必ず確認
3. **画像内容に基づく判定** - 推測・憶測禁止
4. **コードファイル参照禁止** - UI表示のみから評価

### ui-verification-specialist 固有
- **修正完了判定基準**: スクリーンショット撮影 → Read 確認 → 画像で期待通りの表示確認 → ユーザー操作実行 → 操作後確認
- **FALSE SUCCESS CLAIMS 禁止**: 推測での「修正完了」宣言は完全禁止

### ui-review 固有
- **修正提案禁止**: 問題点の指摘のみに徹する
- **技術的原因分析禁止**: UI表示から見える問題のみを記録
- **すべての問題を列挙**: 小さな問題も見逃さない

---

## 📁 関連ドキュメント

- `UI_REVIEW_AGENT_README.md` - ui-verification-specialist の詳細説明
- `UI_REVIEW_README.md` - ui-review の詳細説明
- `CLAUDE.md` - メインエージェントのルール（UI修正完了時の必須プロトコル含む）
- `.clinerules-ui-verification-specialist` - ui-verification-specialist のルール定義
- `.clinerules-ui-review` - ui-review のルール定義
- `.claude/agents/ui-verification-specialist.md` - ui-verification-specialist のエージェント設定
- `.claude/agents/ui-review.json` - ui-review のエージェント設定

---

**作成日**: 2025-01-11  
**バージョン**: 1.0  
**メンテナンス**: サブエージェント追加時に本ドキュメントを更新
